"0","# rasterize roads ----"
"0","rs <- raster(extent(roads), crs=projection(wgs84))"
"0","rs[] <- 1:ncell(rs)"
"0",""
"0","rsp <- rs %>% rasterToPolygons()"
"0","rp <- roads %>% raster::intersect(rsp)"
"0","rp$length <- rgeos::gLength(rp, byid=TRUE) / 1000"
"0","x <- tapply(rp$length, rp$layer, sum)"
"0",""
"0","roads_r <- rs %>% raster()"
"0","roads_r[as.integer(names(x))] <- x"
